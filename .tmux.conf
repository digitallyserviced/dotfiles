# --------------------------------------------------
# --🮦🮦🮦🮦🮦🮧🮧🮧🮧🮧🮧  🮠🮡 🮨 🮨🮨🮨🮨🮣 🮨🮨🮨🮦🮨🮦🮨🮦🮨🮤🮥 🮦 🮧 🮨 🮩 🮪 🮫 🮬 🮭 🮮 🮵🮶🮷🮸🮼🮽🮾🮿🯀🯄🯊     🬽🭇🬽🭈🬽🭈🬽🭈🬽🭈🬽🬽🬽🬽🬽🭊🬿🭊🬿🭊🬿🭊🬿🭊🭑🭊🭆🭂🭐🭌🭃🭌🭐🭎🭐🭌🭌🭅
# 🭊🭆🭂🭌🭌🬼🭇🬽🭈🬾🭉🬿🭊🭀🭋🭁🭌🭂🭍🭃🭎🭄🭏🭅🭐🭆🭑🭇🬼🭈🬽🭉🬾🭋🭀🭏🭄🭎🭃🭄🭏🭇🭈🭈🬽🭍🭐🭊🭌🭍🭎🭏🭐🭑🭑🭃🭊🭩🭂🭅🭀🭊🭁🭂🭃🭄🭅🭆🭇🭈🭉🭊🭋🭌🭍🭎🭏🭐
# 🯰🯱🯲🯳🯴🯵🯶🯷🯸🯹⌨⌬⌭⌮⌯⏣⏦⏧🭑🭒🭓🭔🭕🭖🭗🭘🭙🭚🭛🭜🭝🭞🭟🭠🭡🭢🭣 🭤 🭥 🭧 🭨 🭩 🭪 🭫 🭬 🭭   🭮🭯🭰🭱🭲🭳🭴🭵🭶🭷🭸🭹🭺🭻🭼🭽🭾🭿🮀🮁🮂🮃🮄🮅🮆🮈🮉🮊🮋🮌🮍🮎🮏🮗🮚🮛🮘🮙🮯🮻🯀----------------------🮠🮡🮮🮭🮬🮫🮪🮩🮨🮧🮦🮥🮤🮣🮢🮡🮠🮟🮞🮝🮜🮛🮚🮙🮘🮗🮖🮕🮔🮓🮒🮑🮐🮏🮎🮍🮌🮋🮊🮉🮈🮇🮆🮅🮄🮂🮁🮀🭿🭾🭽🭼🭻🭺🭹🭸🭷🭶🭵🭴🭳🭲🭱🭰🭯🭮🭭🭬🭪🭩🭨🭧🭦🭥🭤🭣🭢🭡🭠🭟🭞🭝🭜🭛🭚🭙🭘🭗🭖🭕🭔🭓🭒🭑🭐🭏🭎🭍🭌🭋🭊🭉🭈🭇🭆🭅🭄🭃🭂🭁🭀🬿🬾🬽🬼🬻🬺🬹🬸🬷🬶🬵🬴🬳🬲🬱🬰🬯🬮🬭🬬🬫🬪🬩🬨🬧🬦🬥🬤🬣🬢🬡🬠🬟🬞🬝🬜🬛🬚🬙🬘🬗🬖🬕🬔🬓🬒🬑🬐🬏🬎🬍🬌🬋🬊🬉🬈🬇🬆🬅🬄🬃🬂🬁🬀🬀🬀🬀🬀---
# Plugins
# -----------------------------------------------------------------------------
set -g @menus_trigger 'F9'

set -g @plugin 'tmux-plugins/tpm'
set -g @plugin 'tmux-plugins/tmux-sensible'
set -g @plugin 'tmux-plugins/tmux-net-speed'
set -g @plugin 'thewtex/tmux-mem-cpu-load'
set -g @plugin 'tmux-plugins/tmux-prefix-highlight'
set -g @plugin 'b0o/tmux-autoreload'
set -g @plugin 'tmux-plugins/tmux-copycat'
set -g @plugin 'tmux-plugins/tmux-open'
set -g @plugin 'tmux-plugins/tmux-pain-control'
set -g @plugin 'tmux-plugins/tmux-yank'
set -g @plugin 'jaclu/tmux-menus'
# set -g @plugin 'digitallyserviced/tmux-customs'
# -----------------------------------------------------------------------------
set -g @plugin 'tmux-plugins/tmux-logging'
# General
# -----------------------------------------------------------------------------
set-option -g @tmux-autoreload-configs '/home/chris/.tmux.conf,/home/chris/.tmux.status.conf'
set-option -g @tmux-autoreload-quiet 1
# Change prefix to C-a
set -g prefix C-a
unbind-key C-b
bind-key C-a send-prefix

# Support 256 colors
# set -g default-terminal "screen-256color"
# set -ga terminal-overrides ",*256col*:Tc"
set -g mouse on
set -g default-terminal "${TERM}"
set -as terminal-overrides ',*:Smulx=\E[4::%p1%dm'  # undercurl support
set -as terminal-overrides ',*:Setulc=\E[58::2::%p1%{65536}%/%d::%p1%{256}%/%{255}%&%d::%p1%{255}%&%d%;m'  # underscore colours - needs tmux-3.0]']'
# Automatically rename window
set-window-option -g automatic-rename
setw -g automatic-rename

# Automatically set title
set-option -g set-titles on

# Start window numbering at 1 so you don't need to reach for 0.
set -g base-index 1

# Don't wait for escape sequence.
set -sg escape-time 0

# Renumber windows if anything changes
set-option -g renumber-windows on
set-window-option -g aggressive-resize off
set-window-option -g window-size largest
# Update every 5 seconds
set -g status-interval 5
set-option -g status-position top

# Monitor activity
set-window-option -g monitor-activity on
set -g visual-activity off
set -g visual-bell off

# Vim mode
setw -g mode-keys vi

# -----------------------------------------------------------------------------
# Nesting
# -----------------------------------------------------------------------------

bind -T root F12  \
  set prefix None \;\
  set key-table off \;\
  set window-status-current-format "#[fg=black,bg=brightgreen,nobold]#[fg=white,bg=brightgreen] #I #[fg=white,bg=brightgreen] #W #[fg=brightgreen,bg=black,nobold]" \;\
  if -F '#{pane_in_mode}' 'send-keys -X cancel' \;\
  refresh-client -S \;\

bind -T off F12 \
  set -u prefix \;\
  set -u key-table \;\
  set -u window-status-current-format \;\
  refresh-client -S

# -----------------------------------------------------------------------------
# Solarized Theme
# base0   brightblue
# base01  brightgreen
# base02  black
# -----------------------------------------------------------------------------
set -g @download_speed_format "%6s"
set -g @upload_speed_format "%6s"
set -g @net_speed_format "%5s %5s"
set -g @network_format "  %s "
# 
# set -g mode-style "fg=#5a93aa,bg=#cbd9d8"
# set -g message-style "fg=#5a93aa,bg=#cbd9d8"
# set -g message-command-style "fg=#5a93aa,bg=#cbd9d8"
# set -g pane-border-style "fg=#cbd9d8"
# set -g pane-active-border-style "fg=#5a93aa"
# set -g status "on"
# set -g status-justify "center"
# set -g status-style "fg=#5a93aa,bg=#0f1c1e"
# set -g status-left-length "100"
# set -g status-right-length "100"
# set -g status-left-style NONE
# set -g status-right-style NONE
# set -g status-left "#[fg=#2f3239,bg=#5a93aa,bold] #S #[fg=#5a93aa,bg=#0f1c1e,nobold,nounderscore,noitalics]"
# set -g status-right "#[fg=#0f1c1e,bg=#0f1c1e,nobold,nounderscore,noitalics]#[fg=#5a93aa,bg=#0f1c1e] #{prefix_highlight} #($TMUX_PLUGIN_MANAGER_PATH/tmux-mem-cpu-load/tmux-mem-cpu-load -g 6 -a 0 -m 0 --interval 2)#[fg=#cbd9d8,bg=#0f1c1e,nobold,nounderscore,noitalics]#[fg=#5a93aa,bg=#cbd9d8] %Y-%m-%d  %I:%M %p #[fg=#5a93aa,bg=#cbd9d8,nobold,nounderscore,noitalics]#[fg=#2f3239,bg=#5a93aa,bold] #{net_speed} #[fg=#5a93aa,bg=#cbd9d8,nobold,nounderscore,noitalics]#[fg=#2f3239,bg=#5a93aa,bold] #h "
# setw -g window-status-activity-style "underscore,fg=#587b7b,bg=#0f1c1e"
# setw -g window-status-separator ""
# setw -g window-status-style "NONE,fg=#587b7b,bg=#0f1c1e"
# setw -g window-status-format "#[fg=#0f1c1e,bg=#0f1c1e,nobold,nounderscore,noitalics]#[default] #I  #W #F #[fg=#0f1c1e,bg=#0f1c1e,nobold,nounderscore,noitalics]"
# setw -g window-status-current-format "#[fg=#0f1c1e,bg=#cbd9d8,nobold,nounderscore,noitalics]#[fg=foreground,bg=green,bold] #I  #W #F #[fg=#cbd9d8,bg=#0f1c1e,nobold,nounderscore,noitalics]"
%if "#{==:#{session_name},barmain}" 
  source-file '/home/chris/.tmux.bar.conf'
%elif "#{~=:#{session_name},turd}" 
  source-file '/home/chris/.tmux.status.conf'
%endif
# # Status bar
# set -g status "on"
# set -g status-style "none"
# set -g status-justify "left"
# set -g status-bg "black"
#
# # Status left
# set -g status-left-style "none"
# set -g status-left-length "100"
# set -g status-left "#[fg=white,bg=brightblue,bold] #S #[fg=brightblue,bg=brightgreen,nobold] #[fg=white]#I:#P #[fg=brightgreen,bg=black,nobold]"
#
# # Status right
# set -g status-right-style "none"
# set -g status-right-length "100"
# set -g status-right "#[fg=brightgreen,bg=black,nobold]#[fg=white,bg=brightgreen] #(uptime | sed 's/.*load average//' | awk '{print $2, $3, $4}')  %Y-%m-%d %H:%M #[fg=brightblue,bg=brightgreen,nobold]#[fg=white,bg=brightblue] #h "
#
# # Window
# setw -g window-status-style "none"
# setw -g window-status-separator ""
# setw -g window-status-format "#[fg=white,bg=black]  #I #[fg=white,bg=black] #W  "
#
# # Active window
# setw -g window-status-activity-style "bold"
# setw -g window-status-current-format "#[fg=black,bg=white,nobold]#[fg=black,bg=white] #I #[fg=black,bg=white] #W #[fg=white,bg=black,nobold]"
#
# # Panes
# set -g pane-active-border-style "fg=white"
# set -g pane-border-style "fg=brightgreen"
#
# -----------------------------------------------------------------------------
# Key Bindings
# -----------------------------------------------------------------------------

# Re-Load tmux config
bind R source-file ~/.tmux.conf \; display-message "Reloaded ~/.tmux.conf"
is_vim="ps -o state= -o comm= -t '#{pane_tty}' | grep -iqE '^[^TXZ ]+ +(\\S+\\/)?g?(view|n?vim?x?)(diff)?$'"
bind-key -n 'C-h' if-shell "$is_vim" 'send-keys C-h' { if -F '#{pane_at_left}' '' 'select-pane -L' }
bind-key -n 'C-j' if-shell "$is_vim" 'send-keys C-j' { if -F '#{pane_at_bottom}' '' 'select-pane -D' }
bind-key -n 'C-k' if-shell "$is_vim" 'send-keys C-k' { if -F '#{pane_at_top}' '' 'select-pane -U' }
bind-key -n 'C-l' if-shell "$is_vim" 'send-keys C-l' { if -F '#{pane_at_right}' '' 'select-pane -R' }

bind-key -T copy-mode-vi 'C-h' if -F '#{pane_at_left}' '' 'select-pane -L'
bind-key -T copy-mode-vi 'C-j' if -F '#{pane_at_bottom}' '' 'select-pane -D'
bind-key -T copy-mode-vi 'C-k' if -F '#{pane_at_top}' '' 'select-pane -U'
bind-key -T copy-mode-vi 'C-l' if -F '#{pane_at_right}' '' 'select-pane -R'
# Join pane
bind P choose-window 'join-pane -h -s "%%"'

# Move the current window left or right
bind S-left swap-window -t -1
bind S-right swap-window -t +1

# -----------------------------------------------------------------------------
# Tmux Plugin Manager
# -----------------------------------------------------------------------------

# Initialize TMUX plugin manager
# (keep this line at the very bottom of tmux.conf)
run '~/.tmux/plugins/tpm/tpm'
unbind-key C-v 
unbind-key M-v
bind-key -T copy-mode-vi M-v send-keys -X copy-pipe-and-cancel "xclip -i -sel clipboard"
bind-key C-v run "xsel | tmux load-buffer -b sysclip - ; tmux paste-buffer -b sysclip ; tmux delete-buffer -b sysclip"
run-shell "~/.tmux/plugins/tmux-customs/customs.tmux" 
