#!/bin/zsh 
emulate zsh 


# local -a chars=('ğ‘¨‹' 'ğ‘¨Œ' 'ğ‘¨' 'ğ‘¨' 'ğ‘¨' 'ğ‘¨Ÿ' 'ğ‘¨' 'ğ‘¨œ' 'ğ‘¨›' 'ğ‘¨š' 'ğ‘¨™' 'ğ‘¨˜' 'ğ‘¨—' 'ğ‘¨–' 'ğ‘¨•' 'ğ‘¨”' 'ğ‘¨“' 'ğ‘¨’' 'ğ‘¨‘' 'ğ‘¨' 'ğ‘¨ ' 'ğ‘¨¡' 'ğ‘¨¢' 'ğ‘¨¤' 'ğ‘¨¥' 'ğ‘¨¦' 'ğ‘¨§' 'ğ‘¨¨' 'ğ‘¨©' 'ğ‘¨ª' 'ğ‘¨«' 'ğ‘¨¬' 'ğ‘¨­' 'ğ‘¨®' 'ğ‘¨¯' 'ğ‘¨¿' 'ğ‘¨°' 'ğ‘¨±' 'ğ‘¨²' 'ğ‘©€' 'ğ‘©‚' 'ğ‘©ƒ' 'ğ‘©„' 'ğ‘©…' 'ğ‘©†')
# local -a TS=("	" "	")
# print -x 16 -aC 2 -f "	%s 	%s" -- ${(@z)${TS:^^chars}} 
local -a wifistr=('ğŸ¬ğŸ¬»' 'ğŸ¬µ ' 'ğŸ¬ ')
local ssid=$(iwgetid -r)
cat /proc/net/wireless | tail +3 | read iface wstatus link level noise nwid crypt frag retry misc missed
typeset -F 0 sig=${link}

[[ ${sig} -le 100 ]] && { sigchr="${wifistr[1]}"; color=2; }
[[ ${sig} -lt 70 ]] && { sigchr="${wifistr[2]}"; color=4; }
[[ ${sig} -lt 50 ]] && { sigchr="${wifistr[3]}"; color=1; }

print -v outstr -f '#[fg=colour0,push-default]ï‡« %s #[fg=colour%4$d]%02s#[fg=default] (#[fg=colour%4$d,dim,bold]%d%%#[fg=default])#[pop-default]' "${ssid}" "${sigchr}" ${sig} $color

echo ${outstr}
